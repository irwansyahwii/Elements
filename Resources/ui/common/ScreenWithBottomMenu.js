// Generated by CoffeeScript 1.9.2
(function() {
  var AboutScreen, BottomMenuBar, SCREEN_HEIGHT, ScreenWithTopBarMenu,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  BottomMenuBar = require("/ui/common/BottomMenuBar");

  AboutScreen = require("/ui/common/AboutScreen");

  SCREEN_HEIGHT = 768;

  ScreenWithTopBarMenu = (function() {
    function ScreenWithTopBarMenu() {
      this.click = bind(this.click, this);
      this.showMainMenuScreen = bind(this.showMainMenuScreen, this);
      this.showFloorplanScreen = bind(this.showFloorplanScreen, this);
      this.showLocationScreen = bind(this.showLocationScreen, this);
      this.showGalleryScreen = bind(this.showGalleryScreen, this);
      this.showAboutScreen = bind(this.showAboutScreen, this);
      this.assignToCurrentSubscreen = bind(this.assignToCurrentSubscreen, this);
      this.getSubscreenHeight = bind(this.getSubscreenHeight, this);
      this.play = bind(this.play, this);
      this.animateInTopBar = bind(this.animateInTopBar, this);
      this.init = bind(this.init, this);
      this.raiseOnDoubleTapped = bind(this.raiseOnDoubleTapped, this);
      this.view = Ti.UI.createView({
        width: Ti.UI.FILL,
        height: Ti.UI.FILL
      });
      this.topBar = new BottomMenuBar().init();
      this.view.add(this.topBar.view);
      this.subScreen = null;
      this.onDoubleTapped = null;
      this.logoButtonClicked = null;
    }

    ScreenWithTopBarMenu.prototype.raiseOnDoubleTapped = function(eventInfo) {
      if (this.onDoubleTapped !== null) {
        return this.onDoubleTapped(eventInfo);
      }
    };

    ScreenWithTopBarMenu.prototype.init = function() {
      this.topBar.view.left = 0;
      this.topBar.view.top = SCREEN_HEIGHT + 1;
      this.topBar.onButtonClicked = this.click;
      return this;
    };

    ScreenWithTopBarMenu.prototype.animateInTopBar = function() {
      return this.topBar.view.animate({
        top: SCREEN_HEIGHT - this.topBar.view.height,
        duration: 500
      });
    };

    ScreenWithTopBarMenu.prototype.play = function() {
      return this.animateInTopBar();
    };

    ScreenWithTopBarMenu.prototype.getSubscreenHeight = function() {
      return SCREEN_HEIGHT - this.topBar.view.height;
    };

    ScreenWithTopBarMenu.prototype.assignToCurrentSubscreen = function(newSubScreen) {
      if (this.subScreen !== null) {
        this.subScreen.view.getParent().remove(this.subScreen.view);
        this.subScreen = null;
      }
      newSubScreen.view.top = 0;
      newSubScreen.view.height = this.getSubscreenHeight();
      newSubScreen.view.width = this.view.width;
      newSubScreen.relayout();
      newSubScreen.play();
      this.subScreen = newSubScreen;
      return this.view.add(newSubScreen);
    };

    ScreenWithTopBarMenu.prototype.showAboutScreen = function() {
      var aboutScreen;
      aboutScreen = new AboutScreen().init();
      return this.assignToCurrentSubscreen(aboutScreen);
    };

    ScreenWithTopBarMenu.prototype.showGalleryScreen = function() {
      var galleryScreen;
      galleryScreen = new GalleryScreen().init();
      galleryScreen.onDoubleTapped = this.raiseOnDoubleTapped;
      return this.assignToCurrentSubscreen(galleryScreen);
    };

    ScreenWithTopBarMenu.prototype.showLocationScreen = function() {
      var locationScreen;
      locationScreen = new LocationScreen().init();
      return this.assignToCurrentSubscreen(locationScreen);
    };

    ScreenWithTopBarMenu.prototype.showFloorplanScreen = function() {
      var floorPlanscreen;
      floorPlanscreen = new FloorplanScreen().init();
      return this.assignToCurrentSubscreen(floorPlanscreen);
    };

    ScreenWithTopBarMenu.prototype.showMainMenuScreen = function() {
      if (this.logoButtonClicked !== null) {
        return this.logoButtonClicked();
      }
    };

    ScreenWithTopBarMenu.prototype.click = function(button_id) {
      if (button_id === 0) {
        this.showMainMenuScreen();
      }
      if (button_id === 1) {
        return this.showAboutScreen();
      }
    };

    return ScreenWithTopBarMenu;

  })();

  module.exports = ScreenWithTopBarMenu;

}).call(this);
